- name: Install base packages
  become: yes
  when: ansible_distribution == 'Fedora' and ansible_pkg_mgr != 'atomic_container'
  dnf:
    name:
      - python3-libselinux
      - git
      - htop
      - screenfetch
      - unzip
      - vim-enhanced
      - hunspell-sv
      - langpacks-sv
      - langpacks-en
      - logrotate
      - nfs-utils
      - wget
      - tar
      - byobu

- name: Install base packages
  become: yes
  when: ansible_distribution == 'Ubuntu'
  package:
    name:
      - git
      - htop
      - screenfetch
      - unzip
      - vim
      - hunspell-sv
      - logrotate
      - nfs-common
      - wget
      - tar
      - byobu

- name: Install base packages
  become: yes
  # Silverblue
  when: ansible_pkg_mgr == 'atomic_container'
  community.general.rpm_ostree_pkg:
    name:
      - ansible
      - byobu
      - arm-image-installer

- name: Copy public PGP key
  copy:
    src: PGP-public-key.txt
    dest: /home/{{ ansible_user_id }}/PGP-public-key.txt

- name: Import PGP public key
  command: gpg --import /home/{{ ansible_user_id }}/PGP-public-key.txt

# TODO:
# - Restart pcscd?
# - Configure scdaemon.conf "reader-port Yubico Yubi"?
# - Configure git?
